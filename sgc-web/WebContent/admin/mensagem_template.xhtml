<ui:fragment xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<f:metadata>
	  <f:event type="preRenderView" listener="#{mensagemMB.initializeUsuarioRecebido(usuarioRecebidoId)}"/>
	</f:metadata>

	<h:form>
		<h:inputHidden value="#{mensagemMB.mensagem.id}" />
		<p:panelGrid columns="2" >
			<f:facet name="header">
               Cadastrar Mensagem
           </f:facet>

			<h:outputLabel for="usuarioEnvio" value="Usuario envio: *"
				rendered="#{empty usuarioRecebidoId}" />
			<p:selectOneMenu id="usuarioEnvio"
				value="#{mensagemMB.mensagem.usuarioEnvio.id}" required="true"
				label="Usuario Envio"
				rendered="#{empty usuarioRecebidoId}">
				<f:selectItem itemLabel="Selecione" itemValue="" />
				<f:selectItems value="#{usuarioMB.usuarios}" var="nome"
					itemLabel="#{nome.nome}" itemValue="#{nome.id}" />
			</p:selectOneMenu>

			<h:outputLabel for="usuarioRecebido" value="Enviar p/ Usuario: "
				rendered="#{empty usuarioRecebidoId}" />
			<p:selectOneMenu id="usuarioRecebido"
				value="#{mensagemMB.mensagemUsuario.usuarioRecebido.id}"
				required="false" label="Usuario Recebido"
				rendered="#{empty usuarioRecebidoId}">
				<f:selectItem itemLabel="Selecione" itemValue="" />
				<f:selectItems value="#{usuarioMB.usuarios}" var="nome"
					itemLabel="#{nome.nome}" itemValue="#{nome.id}" />
			</p:selectOneMenu>

			<h:outputLabel for="grupoRecebido" value="Enviar p/ Grupo: "
				rendered="#{empty usuarioRecebidoId}" />
			<p:selectOneMenu id="grupoRecebido"
				value="#{mensagemMB.mensagemGrupoUsuario.grupoUsuarioRecebido.id}"
				required="false" label="Grupo Recebido"
				rendered="#{empty usuarioRecebidoId}">
				<f:selectItem itemLabel="Selecione" itemValue="" />
				<f:selectItems value="#{grupoUsuarioMB.gruposUsuario}" var="nome"
					itemLabel="#{nome.nome}" itemValue="#{nome.id}" />
			</p:selectOneMenu>

			<h:outputLabel for="mensagem" value="Mensagem: " />
			<p:inputTextarea id="mensagem"
				value="#{mensagemMB.mensagem.mensagem}" label="Mensagem"
				required="false" />

			<f:facet name="footer">
				<p:commandButton update="msg" value="Salvar"
					action="#{mensagemMB.inserirEditar}" icon="ui-icon-check"
					style="margin:0" />
				<p:messages id="msg" />
			</f:facet>
		</p:panelGrid>
	</h:form>

</ui:fragment>