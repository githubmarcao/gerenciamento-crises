<ui:composition template="template.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">



	<ui:define name="conteudo">
		<h:form>
			<h:panelGrid columns="2" style="margin-top:60px;margin-left:100px">
				<f:facet name="header">  
                	Cadastrar Consulta  
            	</f:facet>
				<h:outputLabel for="medicoID" value="Medico:" />
				<h:panelGroup>
					<p:inputText id="medicoNome" value="#{consultaMB.consulta.medico.nome}"
						readonly="true" required="true" />
					<p:commandButton value="..." onclick="dlgMedico.show();"
						type="button" />
				</h:panelGroup>
				
				<h:outputLabel for="medicoID" value="Paciente:" />
				<h:panelGroup>
					<p:inputText id="pacienteNome" value="#{consultaMB.consulta.paciente.nome}"
						readonly="true" required="true" />
					<p:commandButton value="..." onclick="dlgPaciente.show();"
						type="button" />
				</h:panelGroup>
				
				<h:outputLabel for="data" value="Data:" />
				<p:calendar pattern="dd/MM/yyyy" mode="popup" id="data" value="#{consultaMB.consulta.dataMarcacao}" />

				<h:outputLabel for="observacao" value="ObservaÃ§Ã£o:" />
				<p:inputTextarea id="observacao" value="#{consultaMB.consulta.observacao}" />

				<f:facet name="footer">
					<p:commandButton update="msg" value="Salvar" action="#{consultaMB.inserirEditar}" icon="ui-icon-check" style="margin:0"/>
					<p:messages id="msg"/>
				</f:facet>
				
			</h:panelGrid>

			<p:dialog id="modalDialogMedico" header="Lista de Medicos" widgetVar="dlgMedico"
				modal="true" height="170" width="400">

				<p:dataTable value="#{medicoMB.medicos}" var="medico" 
					paginator="true" rows="5">

					<p:column headerText="Nome" filterMatchMode="contains" filterBy="#{medico.nome}">

						<h:commandLink id="alterar" action="#{consultaMB.selecionarMedico}"
							update="medicoID,medicoNome" icon="ui-icon-search"
							oncomplete="dlgMedico.hide();">
							<h:outputText value="#{medico.nome}" />
							<f:param name="idMedico" value="#{medico.id}" />
						</h:commandLink>

					</p:column>
				</p:dataTable>
			</p:dialog>
			
			<p:dialog id="modalDialogPaciente" header="Lista de Pacientes" widgetVar="dlgPaciente"
				modal="true" height="170" width="400">

				<p:dataTable value="#{pacienteMB.pacientes}" var="paciente" 
					paginator="true" rows="5">

					<p:column headerText="Nome" filterMatchMode="contains" filterBy="#{paciente.nome}">

						<h:commandLink id="alterar" action="#{consultaMB.selecionarPaciente}"
							update="pacienteID,pacienteNome" icon="ui-icon-search"
							oncomplete="dlgPaciente.hide();">
							<h:outputText value="#{paciente.nome}" />
							<f:param name="idPaciente" value="#{paciente.id}" />
						</h:commandLink>

					</p:column>
				</p:dataTable>
			</p:dialog>

		</h:form>
	</ui:define>

</ui:composition>